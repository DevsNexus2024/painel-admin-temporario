async function syncBitsoExtract(){try{const token=sessionStorage.getItem("jwt_token")||localStorage.getItem("jwt_token")||sessionStorage.getItem("auth_token")||localStorage.getItem("auth_token");if(!token)throw new Error("Token de autenticação não encontrado. Faça login novamente.");const date=function(){const today=new Date;return`${today.getFullYear()}-${String(today.getMonth()+1).padStart(2,"0")}-${String(today.getDate()).padStart(2,"0")}`}(),response=await fetch(`https://api-bank-v2.gruponexus.com.br/bitso/sync/${date}`,{method:"POST",headers:{Authorization:`Bearer ${token}`,Accept:"application/json"}}),responseData=await response.json();if(!response.ok){if(responseData.error){return{success:!1,error:responseData.error.message||responseData.error.code||"Erro desconhecido"}}return{success:!1,error:responseData.message||`HTTP error! status: ${response.status}`}}return{success:!0,message:responseData.message||"Extrato sincronizado com sucesso!",...responseData}}catch(error){return{success:!1,error:error.message||"Erro ao sincronizar extrato"}}}export{syncBitsoExtract};
